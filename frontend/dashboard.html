<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"><title>My Bookings</title>
  <style>table{border-collapse:collapse} td,th{border:1px solid #ccc;padding:8px}</style>
</head>
<body>
  <h2>My Bookings</h2>
  <table id="tbl"><thead>
    <tr><th>Model</th><th>Date</th><th>Location</th><th>Created</th></tr>
  </thead><tbody></tbody></table>

  <script>
    (async () => {
      const me = await fetch('/api/auth/me').then(r=>r.json());
      if (!me.user) { alert('Login required'); location.href='/login.html'; return; }

      const res = await fetch('/api/bookings');
      const data = await res.json();
      const tb = document.querySelector('#tbl tbody');
      tb.innerHTML = (data.bookings || []).map(b => `
        <tr>
          <td>${b.model}</td>
          <td>${b.preferred_date}</td>
          <td>${b.location ?? '-'}</td>
          <td>${b.created_at}</td>
        </tr>
      `).join('') || `<tr><td colspan="4">No bookings yet.</td></tr>`;
    })();
  </script>
  <script src="/app.js"></script>

</body>
</html>
